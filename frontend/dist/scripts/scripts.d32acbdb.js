"use strict";var app=angular.module("stenoApp",["ngAnimate","ngRoute","mm.foundation","elasticsearch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/search/:queryInput",{templateUrl:"views/results.html",controller:"ResultsCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]).constant("euiHost","http://steno.fm:9200");app.factory("GlobalService",[function(){var a={hiddenStatus:!0,isHiddenChrome:function(){return this.hiddenStatus},showChrome:function(){this.hiddenStatus=!1},hideChrome:function(){this.hiddenStatus=!0},toggleChrome:function(){this.hiddenStatus=!this.hiddenStatus},focusSearchField:function(){var a=document.getElementById("query");a&&a.focus()},query:{input:""},submitQuery:function(a){console.log("GlobalService.submitQuery() called"),this.query=a}};return a}]),app.service("ResultsService",["esFactory",function(a){return a({host:"steno.fm:9200",apiVersion:"1.4",log:"trace"})}]),app.controller("MainCtrl",["$scope",function(){}]),app.controller("HomeCtrl",["$scope","$http","$location","GlobalService",function(a,b,c,d){a.isLoading=!1,a.getLocation=function(a){return b.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:a,sensor:!1}}).then(function(a){var b=[];return angular.forEach(a.data.results,function(a){b.push(a.formatted_address)}),b})},a.submitQueryInput=function(){c.path("/search/"+a.query.input)},d.hideChrome()}]),app.controller("SearchCtrl",["$scope","$http","$location","GlobalService",function(a,b,c){a.isLoading=!1,a.getLocation=function(a){return b.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:a,sensor:!1}}).then(function(a){var b=[];return angular.forEach(a.data.results,function(a){b.push(a.formatted_address)}),b})},a.submitQueryInput=function(){console.log("SearchCtrl $scope.submitQueryInput() called"),c.path("/search/"+a.query.input)}}]),app.controller("ResultsCtrl",["$scope","$http","$routeParams","ResultsService","GlobalService",function(a,b,c,d,e){e.showChrome(),a.query={input:""},a.keypress=function(){document.getElementById("query").focus()};var f=c.queryInput;a.query.input=f,a.getResults=function(){console.log("ResultsCtrl $scope.getResults() called."),d.search({q:f}).then(function(b){var c=b.hits.hits;a.results=c},function(a){console.trace(a.message)})}}]),app.controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);